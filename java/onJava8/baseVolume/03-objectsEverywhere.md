# 万物皆对象

## 对象操纵

Java 语法允许我们使用带双引号的文本内容来初始化字符串。创建一个引用的同时进行初始化：

```java
String s = "asdf";
```

## 对象创建

在 Java 中，通常我们使用 new 操作符来创建一个新对象。new 关键字代表：创建一个新的对象实例。

```java
String s = new String("asdf");
```

## 数据存储

- 寄存器（Registers）是最快的存储区域，位于 CPU 内部。然而，寄存器的数量十分有限，所以寄存器根据需求进行分配。我们对其没有直接的控制权，也无法在自己的程序里找到寄存器存在的踪迹。
- 栈内存（Stack）存在于常规内存 RAM 区域中，可通过栈指针获得处理器的直接支持。栈指针下移分配内存，上移释放内存。这是一种仅次于寄存器的非常快速有效的分配存储方式。创建程序时，Java 系统必须知道栈内保存的所有项的生命周期。这种约束限制了程序的灵活性。对象引用保存在栈内存上。
- 堆内存（Heap）这是一种通用的内存池（也在 RAM 区域），所有 Java 对象都存在于其中。与栈内存不同，编译器不需要知道对象必须在堆内存上停留多长时间。因此，用堆内存保存数据更具灵活性。创建一个对象时，只需用 new 命令实例化对象即可，当执行代码时，会自动在堆中进行内存分配。这种灵活性是有代价的：分配和清理堆内存要比栈内存需要更多的时间（如果可以用 Java 在栈内存上创建对象，就像在 C++ 中那样的话）。随着时间的推移，Java 的堆内存分配机制现在已经非常快，因此这不是一个值得关心的问题了。
- 常量存储（Constant storage）常量值通常直接放在程序代码中，因为它们永远不会改变。如需严格保护，可考虑将它们置于只读存储器 ROM 中，一个例子是字符串常量池：所有文字字符串和字符串值常量表达式都会自动放入特殊的静态存储中。
- 非 RAM 存储（Non-RAM storage）数据完全存在于程序之外，在程序未运行以及脱离程序控制后依然存在。两个主要的例子：（1）序列化对象：对象被转换为字节流，通常被发送到另一台机器；（2）持久化对象：对象被放置在磁盘上，即使程序终止，数据依然存在。这些存储的方式都是将对象转存于另一个介质中，并在需要时恢复成常规的、基于 RAM 的对象。Java 为轻量级持久化提供了支持。而诸如 JDBC 和 Hibernate 这些类库为使用数据库存储和检索对象信息提供了更复杂的支持。

## 基本类型的存储

通常 new 出来的对象都是保存在堆内存中的，以此方式创建小而简单的变量往往是不划算的。Java 的基本类型的创建并不是通过 new 关键字来产生的，并置于栈内存中。

基本类型有自己对应的包装类型，如果你希望在堆内存里表示基本类型的数据，就需要用到它们的包装类。

```java
char c = 'x';
Character ch = new Character(c);

Character ch = new Character('x');

// 基本类型自动转换成包装类型（自动装箱）
Character ch = 'x';

// 包装类型转化为基本类型（自动拆箱）
char c = ch;
```

## 高精度数值

在 Java 中有两种类型的数据可用于高精度的计算，它们是 `BigInteger` 和 `BigDecimal`。

- BigInteger 支持任意精度的整数。可用于精确表示任意大小的整数值，同时在运算过程中不会丢失精度。
- BigDecimal 支持任意精度的定点数字。例如：可用它进行精确的货币计算。

## 基本类型默认值

| 基本类型 | 初始值 |
| ------ | ------ |
| boolean | false |
| char | \u0000 (null) |
| byte | (byte) 0 |
| short | (short) 0 |
| int | 0 |
| long | 0L |
| float | 0.0f |
| double | 0.0d |

局部变量没有默认值。

## 返回类型

方法名和参数列表统称为方法签名（signature of the method），签名是方法的唯一标识。

当返回类型为 void 时， return 关键字仅用于退出方法，因此在方法结束处的 return 可被省略。我们可以随时从方法中返回。

## 小试牛刀

每个独立的程序应该包含一个 main() 方法作为程序运行的入口。

```java
public static void main(String[] args) {
}
```

关键字 public 表示方法可以被外界访问到。main() 方法的参数是一个 字符串（String）数组。 参数 args 并没有在当前的程序中使用到，但是 Java 编译器强制要求必须要有，这是因为它们被用于接收从命令行输入的参数。

```java
public class ShowProperties {
    public static void main(String[] args) {
        System.getProperties().list(System.out);
        System.out.println(System.getProperty("user.name"));
        System.out.println(System.getProperty("java.library.path"));
    }
}
```
