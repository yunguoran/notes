# [Maven](https://maven.apache.org/)

Maven, a Yiddish word meaning accumulator of knowledge. [download](https://maven.apache.org/download.cgi), [documentation](https://maven.apache.org/guides/index.html).

## Use

### Run

```shell
mvn [options] [<goal(s)>] [<phase(s)>]

mvn -h
```

## [Maven Plugins](https://maven.apache.org/plugins/index.html)

Maven is - at its heart - a plugin execution framework, all work is done by plugins.

- **Build plugins** will be executed during the build and they should be configured in the `<build/>` element from the POM.
- **Reporting plugins** will be executed during the site generation and they should be configured in the `<reporting/>` element from the POM.

## User Centre

### Creating a Project

```shell
mvn archetype:generate -DgroupId=com.mycompany.app -DartifactId=my-app -DarchetypeArtifactId=maven-archetype-quickstart -DarchetypeVersion=1.4 -DinteractiveMode=false
```

- A *plugin* is a collection of *goals* with a general common purpose.
- The `java -cp` command is used to specify the *classpath* for running a Java program.
- Phases and goals may be executed in sequence:

    ```shell
    mvn clean dependency:copy-dependencies package
    ```

### Maven Getting Started Guide

- **groupId** This element indicates the unique identifier of the organization or group that created the project. The groupId is one of the key identifiers of a project and is typically based on the fully qualified domain name of your organization.
- **artifactId** This element indicates the unique base name of the primary artifact being generated by this project. A typical artifact produced by Maven would have the form `<artifactId>-<version>.<extension>` (for example, myapp-1.0.jar).
- **version** This element indicates the version of the artifact generated by the project. The `SNAPSHOT` indicates that a project is in a state of development.
- **properties** This element contains value placeholders accessible anywhere within a POM.

[POM Reference](https://maven.apache.org/ref/3.9.3/maven-model/maven.html#project).

compile your test sources (but not execute the tests): `mvn test-compile`.

The `SNAPSHOT` value refers to the 'latest' code along a development branch, and provides no guarantee the code is stable or unchanging. Conversely, the code in a 'release' version (any version value without the suffix `SNAPSHOT`) is unchanging.

The `configuration` element applies the given parameters to every goal from the compiler plugin.

#### Property Reference (Like String Interpolation)

Sometimes a resource file will need to contain a value that can only be supplied at build time. To accomplish this in Maven, put a reference to the property that will contain the value into your resource file using the syntax `${<propertyName>}`. The property can be one of the values defined in your *pom.xml*, a value defined in the user's *settings.xml*, a property defined in an *external properties file*, or a *system property*.

```xml
<build>
  <resources>
    <resource>
    <directory>src/main/resources</directory>
    <filtering>true</filtering>
    </resource>
  </resources>
</build>
```

Use `<filtering>true</filtering>`, Maven will filter the resources in directory and replace the property references with the actual property values.

- To reference a property defined in your pom.xml, the property name uses the names of the XML elements that define the value
    - `${project.name}`
    - `${project.version}`
    - `${project.build.finalName}`
- Note that some elements of the POM have default values, so don't need to be explicitly defined in your `pom.xml` for the values to be available here.
- Values in the user's `settings.xml` can be referenced using property names beginning with "settings".
    - `${settings.localRepository}`
- To reference a property defined in an external file, all you need to do is add a reference to this external file in your `pom.xml`. Path: `src/main/filters/filter.properties`.

    ```text
    # filter.properties
    my.filter.value=hello!
    ```

    ```xml
    <build>
      <filters>
        <filter>src/main/filters/filter.properties</filter>
      </filters>
      <resources>
        <resource>
          <directory>src/main/resources</directory>
          <filtering>true</filtering>
        </resource>
      </resources>
    </build>
    ```

- Filtering resources can also get values from system properties.
    - `${java.version}`
    - `${command.line.prop}`
    - `mvn process-resources "-Dcommand.line.prop=hello again"`

#### Build Lifecycle

- A plugin may have one or more goals wherein each goal represents a capability of that plugin. For example, the *Compiler* plugin has two goals: `compile` and `testCompile`.
- Plugins are artifacts that provide goals to Maven.

[Lifecycle Reference](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#lifecycle-reference).

### POM

All POMs extend the Super POM unless explicitly set, [Super POM for Maven 3.6.3](https://maven.apache.org/ref/3.6.3/maven-model-builder/super-pom.html).

### Profiles

[Maven-settings](https://maven.apache.org/ref/3.9.4/maven-settings/settings.html).

Profiles can be explicitly specified using the `-P` command line flag.
