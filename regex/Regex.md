# Regex

## 入门

正则表达式的两种用途：搜索和替换。

## 匹配单个字符

`.` 可以匹配任意单个字符、字母、数字，甚至是 `.` 字符本身。

用术语**模式**（pattern）表示实际的正则表达式。

`.` 字符在正则表达式中有特殊的含义。如果模式里需要一个 `.`，就要想办法老告诉正则表达式你需要的是 `.` 字符本身而不是它在正则表达式里的特殊含义。为此需要在 `.` 前面加上一个 `\` 来对它进行转义。

`\` 是一个**元字符**（metacharacter），表示这个字符有特殊含义，代表的不是字符本身。因此 `.` 表示匹配任意单个字符，`\.` 表示匹配 `.` 字符本身。如果需要搜索 `\` 本身，就必须对 `\` 字符进行转义。即 `\\`。

注意 `.` 未必可以匹配所有字符，在大多数的正则表达式实现里，`.` 不能匹配换行符。

```regex
c.t
sales.
.a.
.a..
.a.\.
.a.\.xls
```

## 匹配一组字符

使用 `[` 和 `]` 来定义一个字符集合。在使用 `[` 和 `]` 定义的字符集合里，出现在 `[` 和 `]` 之间的所有字符都是该集合的组成部分，必须匹配其中某个成员。

- 可以用 `-`（连字符）来定义字符区间。
- 字符区间的首、尾字符可以是 ASCII 字符表里的任意字符。
- `-` 只有出现在 `[` 和 `]` 之间的时候才是元字符。在字符集合以外的地方，`-` 只是一个普通字符，只能与 `-` 本身相匹配。因此 `-` 不需要被转义。

使用 `^` 来排除某个字符集合。`^` 的效果将作用于给定字符集合里的左右字符或字符区间，而不是仅限于紧跟在 `^` 字符后面的那一个字符或字符区间。

```regex
[ns]a.\.xls
[Rr]eg[Ee]x
[ns]a[0-9]\.xls
#[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f]
[ns]a[^0-9]\.xls
```

## 使用元字符

- `\d` 匹配任何一个数字字符（等价于`[0-9]`）。
- `\D` 匹配任何一个非数字字符（等价于`[^0-9]`）。
- `\w` 匹配任何一个字母数字字符或下划线字符（等价于`[a-zA-Z0-9_]`）。
- `\W` 匹配任何一个非字母数字字符或非下划线字符（等价于`[^a-zA-Z0-9_]`）。
- `\s` 匹配任何一个空白字符（等价于`[\f\n\r\t\v]`）。
- `\S` 匹配任何一个非空白字符（等价于`[^\f\n\r\t\v]`）。

`\s` 不包含退格符 `\b`，`\S` 也没有排除 `\b`。

```regex
myArray\[[0-9]\]
\r\n\r\n
myArray\[\d\]
\w\d\w\d\w\d
```
